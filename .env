# SonarQube Docker Environment Variables - Production Configuration

# PostgreSQL Database Configuration
POSTGRES_USER=sonar
# Use a strong password in production
POSTGRES_PASSWORD=sonar_secure_password
POSTGRES_DB=sonar

# SonarQube Configuration
SONARQUBE_JDBC_USERNAME=sonar
# Use a strong password in production
SONARQUBE_JDBC_PASSWORD=sonar_secure_password

# SonarQube Version (latest recommended)
SONARQUBE_VERSION=latest

# Web Server Port
SONARQUBE_PORT=9010

# Memory Configuration
SONARQUBE_JAVAOPTS=-Xmx2G -Xms1G

# Security Hardening Settings

# Force HTTPS for all connections
# Update the URL to your actual domain
SONAR_WEB_JAVAOPTS=-Dsonar.forceAuthentication=true -Dsonar.core.serverBaseURL=https://sonarqube.yourdomain.com

# Session timeout in seconds (30 minutes)
SONAR_WEB_SESSION_TIMEOUTINSECONDS=1800

# Java security options
SONAR_SEARCH_JAVAOPTS=-Xmx1G -Xms1G -XX:+HeapDumpOnOutOfMemoryError -Dnode.store.allow_mmap=false

# Disable telemetry
SONAR_TELEMETRY_ENABLE=false

# Disable development mode
SONAR_CE_JAVAOPTS=-Dsonar.ce.javaOpts=-XX:+HeapDumpOnOutOfMemoryError -Dsonar.updatecenter.activate=false

# LDAP Authentication (uncomment and configure if using LDAP)
# SONAR_SECURITY_REALM=LDAP
# LDAP_URL=ldap://ldap.yourdomain.com:389
# LDAP_BINDDN=cn=sonarqube,ou=users,dc=yourdomain,dc=com
# LDAP_BINDPASSWORD=ldappassword
# LDAP_USER_BASEDN=ou=users,dc=yourdomain,dc=com
# LDAP_USER_REQUEST=(&(objectClass=inetOrgPerson)(uid={login}))
# LDAP_USER_REALNAMEATTRIBUTE=cn
# LDAP_USER_EMAILATTRIBUTE=mail